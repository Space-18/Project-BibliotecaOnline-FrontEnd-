<app-menu></app-menu>

<div style="padding: 2%">
  <form class="content" [formGroup]="formsRegistra">
    <div class="submit-form">
      <div class="row">
        <div class="col-lg-12">
        </div>
      </div>
      <div class="row" style="margin-top: 3%">
        <div class="col-md-6 position-relative" formGroupName="Registrar">
          <label for="regNames">Nombre:</label>
          <input type="text" class="form-control" [(ngModel)]="libro.nombre" id="regNames" name="nombres"
            formControlName="validaNombre" required />
          <div *ngIf="submitted && formsRegistra.controls.Registrar.controls.validaNombre.errors" class="invalid">
            <ul>
              <li>El Nombre es obligatorio</li>
              <li>El Nombre es de 4 a 45 caracteres</li>
            </ul>
          </div>
        </div>
        <div class="position-relative" formGroupName="Registrar">
          <label for="regSurname">Portada:</label>



          <div class="col-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="input-group mb-3">
                  <input type="file" (change)="addPortada($event)" formControlName="validaPortada" class="form-control"
                    id="inputGroupFile01" [(ngModel)]="libro.portada" aria-describedby="inputGroupFileAddon01" aria-label="Upload" />
                </div>
              </div>
            </div>
          </div>




          <div *ngIf="submitted && formsRegistra.controls.Registrar.controls.validaPortada.errors" class="invalid">
            <ul>
              <li>La portada es obligatoria y debe ser .jpg - .png - .jpeg</li>
            </ul>
          </div>
        </div>
        <div class="position-relative" formGroupName="Registrar">
          <label for="regEdad">Arhivo:</label>
          <div class="col-4">
            <div class="card-body">
              <div class="row g-3">
                <div class="input-group mb-3">
                  <input type="file" (change)="addUrl($event)" [(ngModel)]="libro.url" formControlName="validaUrl"
                    class="form-control" id="inputGroupFile02" aria-describedby="inputGroupFileAddon02"
                    aria-label="Upload" />
                </div>
              </div>
            </div>
          </div>

          <div *ngIf="submitted && formsRegistra.controls.Registrar.controls.validaUrl.errors" class="invalid">
            <ul>
              <li>El Archivo es obligatorio y debe ser .pdf</li>
            </ul>
          </div>
        </div>
        <div class="col-md-4 position-relative" formGroupName="Registrar">
          <label for="regPais">Autor</label>
          <select formControlName="validaAutorId" id="regPais" class="form-control" name="idPais"
            [(ngModel)]="libro.autorId">
            <option value="-1" selected disabled>
              Selecciona un Autor</option>
            <option *ngFor="let item of autores" value="{{item.id}}">
              {{item.nombres}} {{item.apellidos}}
            </option>
          </select>
          <div *ngIf="submitted && formsRegistra.controls.Registrar.controls.validaAutorId.errors" class="invalid">
            <ul>
              <li>El Autor es obligatorio</li>
            </ul>
          </div>
        </div>


        <div class="col-md-4 position-relative" formGroupName="Registrar">
          <label for="regPais">Editorial</label>
          <select formControlName="validaEditorialId" id="regPais" class="form-control" name="idPais"
            [(ngModel)]="libro.editorialId">
            <option value="-1" selected disabled>
              Selecciona una Editorial</option>
            <option *ngFor="let item of editoriales" value="{{item.id}}">
              {{item.nombre}}
            </option>
          </select>
          <div *ngIf="submitted && formsRegistra.controls.Registrar.controls.validaEditorialId.errors" class="invalid">
            <ul>
              <li>La Editorial es obligatorio</li>
            </ul>
          </div>
        </div>















        <!-- <div class="form-group row" formGroupName="Registrar">
                <label for="" class="col-form-label">Editoriales</label>
                <div class="card-body d-flex justify-content-between">
                  <div class="w-50">
                    <select formControlName="validaEditorialId" id="autores" name="autores" class="form-control w-45" multiple="multiple">
                      <option *ngFor="let obj of editoriales" value="{{ obj.id }}" (click)="addEditorial(obj.id!)">
                        {{obj.id}} - {{ obj.nombre }}
                      </option>
                    </select>
                    <div *ngIf="submitted && formsRegistra.controls.Registrar.controls.validaEditorialId.errors" class="invalid">
                        <ul>
                            <li>El Autor es obligatorio</li>    
                        </ul>
                     </div>
                  </div>
                   <div class="w-50">
                    <select id="autoresObj" name="autoresObj" class="form-control w-45" multiple="multiple">
                      <option *ngFor="let obj of libro.editorialId" value="{{ obj }}" (click)="dropEditorial(obj)">
                        {{ obj }}
                      </option>
                    </select>
                  </div>
                </div>
              </div> -->





      </div>
      <div class="modal-footer">
        <button type="reset" class="btn btn-secondary btn-sm" style="width: 100px;">Limpiar</button>
        <div class="form-group text-center">
          <div class="col-lg-12">
            <button (click)="save()" id="id_reg_registra" class="btn btn-success btn-sm " style="width: 100px;">
              <i *ngIf="load" class="fas fa-spinner fa-spin"></i>
              <span *ngIf="load"> Registrando...</span>
              <span *ngIf="!load">Agregar</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>